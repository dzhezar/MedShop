parameters:
  app.relative_uploads_dir: '/uploads/'
  app.uploads_dir: '%kernel.project_dir%/public%app.relative_uploads_dir%'
  locale: en
  locales: ru|en

services:
  _defaults:
    autowire: true
    autoconfigure: true

  _instanceof:
    App\Strategy\Validation\ValidationStrategyInterface:
      tags: ['app.validation']

    App\Strategy\Breadcurmbs\BreadcrumbsStrategyInterface:
      tags: ['app.breadcrumb']

  App\:
    resource: '../src/*'
    exclude: '../src/{DependencyInjection,Entity,Migrations,Tests,Kernel.php}'

  App\Controller\:
    resource: '../src/Controller'
    tags: ['controller.service_arguments']

  App\Service\FileManager\FileManager:
    arguments:
      - '%app.uploads_dir%'
      - '%kernel.project_dir%/public'

  App\Service\CategoryService:
    arguments:
      - '%app.relative_uploads_dir%'

  App\Service\ProductService:
    arguments:
      - '%app.relative_uploads_dir%'

  App\Service\ArticleService:
    arguments:
      - '%app.relative_uploads_dir%'

  App\Service\MainPageSliderService:
    arguments:
      - '%app.relative_uploads_dir%'

  App\Service\ValidationService:
    arguments:
      - !tagged_iterator app.validation

  App\Service\BreadcrumbsService:
    arguments:
      - !tagged_iterator app.breadcrumb

  App\Factory\PayPalClientFactory:
    arguments:
      - "%env(PAYPAL_CLIENT_ID)%"
      - "%env(PAYPAL_SECRET)%"

  App\Command\SyncStatesCommand:
    arguments: ['%kernel.project_dir%',]
    tags:
      - { name: console.command }

  App\Service\SettingsService:
    arguments:
      - '%kernel.project_dir%'

  App\Service\SettingsCRUDService:
    arguments:
      - '%kernel.project_dir%/config/settings/'

  App\Service\SitemapService:
    arguments:
      - '%kernel.project_dir%/public/sitemap/'

  app.service.settings:
    alias: App\Service\SettingsCRUDService
    public: true

#  App\Twig\SettingsTwigExtension:
#    arguments:
#      - '%request%'



